---
numbering:
  title:
    offset: 0
  start: 6
---
# Build online with GH Actions

You may be familiar with GitHub Actions: it is a widely used continuous integration tool which can easily and automatically publish your Jupyter Book as a website.  
This lesson is designed to get you familiar with GitHub Actions in your Jupyter Book and learn how to manipulate them.  

```{tip} Tip ðŸŒ¶
The workflow file generated by `jupyter-book init --gh-pages` by ðŸŒ¶ users is different than that generated by this template, but you can still follow the exercises.
```

```{tip} What is GitHub Actions?
:class: dropdown

If you have no idea, or are confused what and Action is, don't despair! The most simple explanation is that GHA is a tool for automating workflows. For our purposes, you only need to know:

- "GitHub Actions" is GitHub's product name for its "CI/CD" (Continuous Integration / Continuous Deployment) services (if you don't know what CI/CD is, it's not important).
- you can think of Actions as an algorithm that can be carried out on your GitHub repository automatically
- "workflows" are defined in `.yml` files in the `.github/workflows` folder of your repository
- workflows can be triggered by events, e.g. when you push changes to your repository
- workflows can have multiple steps, e.g. install software, build the book, deploy the book
- pre-built "actions" are provided in an online [marketplace](https://github.com/marketplace?type=actions)
- workflows can include arbitrary code (e.g., bash or Python scripts) and pre-built actions
- GHA is generally free for public repositories, with some limitations on usage for private repositories

```

## Read it

**WIP**
- find the file
- identify the trigger
- describe the environment created
- itendify the steps

## Observe it

**WIP**
- make a commit to the repo
- visit the Actions tab
- observe the workflow running
- dig deeper 

## Break it

**WIP**
- introduce an error
- observe the failure
- fix the error

## Change it

Here we will modify the workflow to add a new feature: automatically updating the "last edited" date in our published book.

The following bash script will modify `date:` field in the `myst.yml` file.

**WIP**
- add to workflow file
- commit, push, observe
- quiz quetsion: what is the date?! file edited, time of commit, time of push, other?... answer = whenever the first line in the code snippet below is executed in the cloud (e.g., time of push + time to set up venv and start build).

```yml
- name: Add current date to myst.yml
  shell: bash
  run: |
      BUILD_DATE="$(date +'%Y-%m-%d')"
      sed -i "s|\${BUILD_DATE}|${BUILD_DATE}|g" myst.yml
      echo "myst.yml:"
      grep -nE '^\s*date:' myst.yml
```

date:  ${BUILD_DATE} 